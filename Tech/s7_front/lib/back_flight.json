{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/poi/flight/{icao24}/pois":{"post":{"tags":["poi"],"summary":"Get Aggregated Pois","description":"Получает информацию о полёте для построения полигона поиска, затем\nформирует запрос к Overpass API по заданным фильтрам и возвращает:\n  - список POI с минимальными данными (id, name, type)\n  - агрегированную информацию (например, количество городов, деревень и т.д.)","operationId":"get_aggregated_pois_poi_flight__icao24__pois_post","parameters":[{"name":"icao24","in":"path","required":true,"schema":{"type":"string","title":"Icao24"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FilterRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FlightPOIResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/poi/pois/details":{"post":{"tags":["poi"],"summary":"Get Pois Details","description":"Получает подробную информацию по списку идентификаторов POI.\nВозвращается словарь, где ключ — poi_id, а значение — объект PoiDetail.","operationId":"get_pois_details_poi_pois_details_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PoiIdsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"$ref":"#/components/schemas/PoiDetail"},"type":"object","title":"Response Get Pois Details Poi Pois Details Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/poi/summarize":{"post":{"tags":["poi"],"summary":"Get Poi Summarizations","operationId":"get_poi_summarizations_poi_summarize_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompletionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/flights/":{"get":{"tags":["flights"],"summary":"Get Flights","description":"Эндпоинт возвращает список полётов (icao24 и вычисленные метаданные),\nполученных из коллекции `metadata` с пагинацией.\nПозволяет сортировать по количеству точек или длительности полёта.","operationId":"get_flights_flights__get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Номер страницы","default":1,"title":"Page"},"description":"Номер страницы"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Количество записей на страницу","default":10,"title":"Limit"},"description":"Количество записей на страницу"},{"name":"sort_by","in":"query","required":false,"schema":{"type":"string","description":"Поле для сортировки: icao24, count, flightDuration","default":"icao24","title":"Sort By"},"description":"Поле для сортировки: icao24, count, flightDuration"},{"name":"order","in":"query","required":false,"schema":{"type":"integer","description":"Порядок сортировки: 1 для ASC, -1 для DESC","default":1,"title":"Order"},"description":"Порядок сортировки: 1 для ASC, -1 для DESC"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FlightBase"},"title":"Response Get Flights Flights  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/flights/{icao24}/details":{"get":{"tags":["flights"],"summary":"Get Flight Details","operationId":"get_flight_details_flights__icao24__details_get","parameters":[{"name":"icao24","in":"path","required":true,"schema":{"type":"string","title":"Icao24"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DetailedResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"CompletionRequest":{"properties":{"prompt":{"type":"string","title":"Prompt","default":""},"max_tokens":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Tokens","default":300},"poi_id":{"type":"integer","title":"Poi Id","default":10920237687},"icao24":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Icao24","default":"ab68f9"},"model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model","default":"deepseek/deepseek-r1-zero:free"}},"type":"object","title":"CompletionRequest"},"DetailedResponse":{"properties":{"icao24":{"type":"string","title":"Icao24"},"count":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Count"},"flightDuration":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Flightduration"},"flightDistance":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Flightdistance"},"departurePlace":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Departureplace"},"arrivalPlace":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Arrivalplace"},"first_seen":{"type":"integer","title":"First Seen"},"last_seen":{"type":"integer","title":"Last Seen"},"waypoints":{"items":{"$ref":"#/components/schemas/Waypoint"},"type":"array","title":"Waypoints"}},"type":"object","required":["icao24","first_seen","last_seen","waypoints"],"title":"DetailedResponse"},"FilterCondition":{"properties":{"key":{"type":"string","title":"Key"},"operator":{"anyOf":[{"$ref":"#/components/schemas/Operator"},{"type":"null"}],"default":"="},"value":{"anyOf":[{"type":"string"},{"type":"integer"},{"type":"number"},{"type":"null"}],"title":"Value"}},"type":"object","required":["key"],"title":"FilterCondition","description":"Условие фильтрации, например:\n  - \"place\"=\"city\"\n  - \"historic\" (без значения, просто наличие тега)"},"FilterRequest":{"properties":{"distance":{"type":"integer","minimum":0.0,"title":"Distance","default":400},"overpass_filters":{"items":{"$ref":"#/components/schemas/FilterCondition"},"type":"array","title":"Overpass Filters","default":[{"key":"place","operator":"=","value":"city"},{"key":"place","operator":"=","value":"village"},{"key":"nature","operator":"=","value":"water"},{"key":"nature","operator":"=","value":"mountain"}]}},"type":"object","title":"FilterRequest"},"FlightBase":{"properties":{"icao24":{"type":"string","title":"Icao24"},"count":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Count"},"flightDuration":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Flightduration"},"flightDistance":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Flightdistance"},"departurePlace":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Departureplace"},"arrivalPlace":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Arrivalplace"}},"type":"object","required":["icao24"],"title":"FlightBase"},"FlightPOIResponse":{"properties":{"aggregations":{"additionalProperties":{"type":"integer"},"type":"object","title":"Aggregations"},"pois":{"items":{"$ref":"#/components/schemas/POI"},"type":"array","title":"Pois"}},"type":"object","required":["aggregations","pois"],"title":"FlightPOIResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Operator":{"type":"string","enum":["=","!=","~","<",">","<=",">="],"title":"Operator"},"POI":{"properties":{"id":{"type":"integer","title":"Id","default":0},"name":{"type":"string","title":"Name","default":"Novosibirsk"},"type":{"type":"string","title":"Type","default":"place"},"description":{"type":"string","title":"Description","default":"Description"},"image_url":{"type":"string","title":"Image Url"},"website":{"type":"string","title":"Website","default":"https://s7.ru"},"lat":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Lat"},"lon":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Lon"}},"type":"object","title":"POI"},"PoiDetail":{"properties":{"id":{"type":"integer","title":"Id","default":0},"name":{"type":"string","title":"Name","default":"Novosibirsk"},"type":{"type":"string","title":"Type","default":"place"},"description":{"type":"string","title":"Description","default":"Description"},"image_url":{"type":"string","title":"Image Url"},"website":{"type":"string","title":"Website","default":"https://s7.ru"},"lat":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Lat"},"lon":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Lon"},"details":{"type":"object","title":"Details"},"tags":{"type":"object","title":"Tags"},"inception":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Inception"}},"type":"object","required":["details","tags"],"title":"PoiDetail"},"PoiIdsRequest":{"properties":{"poi_ids":{"items":{"type":"integer"},"type":"array","title":"Poi Ids"}},"type":"object","required":["poi_ids"],"title":"PoiIdsRequest"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"Waypoint":{"properties":{"lat":{"type":"number","title":"Lat"},"lon":{"type":"number","title":"Lon"},"time":{"type":"integer","title":"Time"},"baroaltitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Baroaltitude"}},"type":"object","required":["lat","lon","time"],"title":"Waypoint"}}}}